# DatesToCronConverter
[Постановка задачи](https://docs.google.com/document/d/1zHBF7SnZt_Fc5ehNTopjVARWdjP7FX3F/edit 
"Тестовое задание")

## Интерпретация поставленной задачи
В метод convert попадают строчки вида дата время, формат может быть неверный, но хотя бы одна строка дана. 
Нужно выделить подмножество строк и сгенерировать для них cron expression по заданным правилам.

Считается, что в каждый из дней, встречающихся в подмножестве, имеется одинаковый набор времени для cron.
То есть, для каждого дня фиксирован набор часов/минут/секунд. Подмножество должно иметь размер хотя бы половину от общего числа строк.

## Алгоритм
Ограничения оказались слишком сильные, поэтому асимптотика экспоненциальная. Перебираются всевозможные подмножества.
Дальше пытаюсь построить cron, чтобы выбранные даты туда точно вошли и выполнялось ограничение: что в каждый из дней, встречающихся в подмножестве, имеется одинаковый набор времени для cron.


## Реализация
Не использовались сторонние реализации DateTime (наверное зря, но я посчитал, что этого требуют). Всяческие коллекции (Set, ArrayList) использовались. 

В методе convert основного класса [DatesToCronConverter](./src/main/java/com/ivanov/kirill/DatesToCronConverter.java) осуществляется нерекурсивный перебор подмножеств. Вспомогательный класс [DateTime](./src/main/java/com/ivanov/kirill/utils/DateTime.java) 
выполняет роль аналога DateTime реализованного в разных библиотеках. Осуществляется проверка на валидность даты, но очень примитивная (метод `validate()`).
Класс [CronGenerator](./src/main/java/com/ivanov/kirill/utils/CronGenerator.java) строит cron по выданным датам, считается, что даты валидные и их больше одной. Умеет проверять, что возможно построить cron expression (метод `validate()`) и строит его (метод `generate()`). Причем строится наиболее читаемый, на мой взгляд вариант cron expression.

Написаны [unit-тесты](./src/test/java/com/ivanov/kirill).

## Проблемы
1. Асимптотика. Если на входе будет много (больше 20) дат, то работать будет долго.
2. Проверка на существование того или иного дня. Так как DateTime рукописный, то считается, что в каждом месяце 31 день.

## Артефакты
[Последний релиз](https://github.com/kirdmiv/DatesToCronConverter/releases/tag/v1.0.1)

[JavaDoc zip](https://github.com/kirdmiv/DatesToCronConverter/releases/tag/v1.0.1-docs)